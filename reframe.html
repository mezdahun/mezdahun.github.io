<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>reFrame</title>
  <meta name="description" content="reFrame is a lightweight, evidence‑based web app that helps you learning cognitive reframing." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #f5f7f6;        /* base */
      --fg: #0f1b14;        /* text */
      --muted: #5a6b63;     /* secondary text */
      --accent: #16a34a;    /* reFrame green */
      --card: #ffffff;      /* surface */
      --ring: rgba(22,163,74,.35);
    }
    * { box-sizing: border-box; }
    html, body { margin: 0; }
    a { color: inherit; text-decoration: none; }
    .container { max-width: 1100px; margin: 0 auto; padding: 24px; }
    header {
      position: sticky; top: 0; z-index: 10; backdrop-filter: saturate(150%) blur(6px);
      background: rgba(255,255,255,.75);
      border-bottom: 1px solid rgba(0,0,0,.06);
    }
    .nav { display: flex; align-items: center; justify-content: space-between; gap: 16px; }
    .brand { display: flex; align-items: center; gap: 10px; font-weight: 700; letter-spacing: .2px; }
    .badge { font-size: 12px; padding: 3px 8px; border: 1px solid rgba(255,255,255,.12); border-radius: 999px; color: var(--muted); }
    .cta {
      display: inline-flex; align-items: center; gap: 10px; padding: 12px 18px; border-radius: 12px;
      background: var(--accent); color: #06120a; font-weight: 700; border: none; cursor: pointer; transition: transform .08s ease, box-shadow .2s ease;
      box-shadow: 0 8px 28px rgba(22,163,74,.35);
    }
    .cta:hover { transform: translateY(-1px); }
    .cta:focus-visible { outline: 3px solid var(--ring); outline-offset: 2px; }

    /* Hero */
    .hero { padding: 60px 0 30px; display: grid; grid-template-columns: 1.2fr 1fr; gap: 28px; align-items: center; }
    .kicker { color: var(--accent); font-weight: 700; text-transform: uppercase; letter-spacing: .12em; font-size: 12px; }
    h1 { font-size: clamp(28px, 4.8vw, 32px); line-height: 1.04; margin: 8px 0 12px; }
    .subtitle { font-size: clamp(15px, 2.2vw, 18px); color: var(--muted); max-width: 60ch; font-weight: 400; }
    .hero-card { background: #ffffff; border: 1px solid rgba(0,0,0,.08); border-radius: 16px; overflow: hidden; box-shadow: 0 8px 26px rgba(0,0,0,.12); }
    .video-wrap { position: relative; width: 100%; padding-top: 56.25%; } /* 16:9 */
    .video-wrap iframe { position: absolute; inset: 0; width: 100%; height: 100%; border: 0; border-radius: 12px; }

    /* Highlights */
    .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-top: 28px; }
    .card { background: var(--card); border: 1px solid rgba(0,0,0,.08); border-radius: 16px; padding: 18px; }
    .card h3 { margin: 0 0 6px; font-size: 18px; }
    .card p { margin: 0; color: var(--muted); font-size: 14.5px; }

    /* Steps */
    .section { padding: 48px 0; }
    .steps { display: grid; grid-template-columns: repeat(4, 1fr); gap: 18px; }
    .step { background: #ffffff; border: 1px solid rgba(0,0,0,.08); border-radius: 16px; padding: 18px; }
    .step-num { display: inline-flex; width: 32px; height: 32px; align-items: center; justify-content: center; border-radius: 999px; background: rgba(22,163,74,.12); color: #14532d; font-weight: 800; margin-bottom: 8px; }

    /* CTA block */
    .cta-block { display: grid; grid-template-columns: 1.2fr 1fr; gap: 18px; align-items: center; background: linear-gradient(120deg, rgba(22,163,74,.07), rgba(22,163,74,.03)); border: 1px solid rgba(0,0,0,.08); border-radius: 18px; padding: 22px; margin: 18px 0; }
    .cta-block p { color: var(--muted); }

    footer { padding: 36px 0 20px; color: var(--muted); font-size: 13px; }

    /* Responsive */
    @media (max-width: 980px) {
      .hero { grid-template-columns: 1fr; }
      .grid, .steps, .cta-block { grid-template-columns: 1fr; }
    }
  
    /* Title + logo badge */
    .title-wrap{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
    .logo-badge{width:6em;height:6em;background:#fff;border-radius:999px;display:grid;place-items:center;box-shadow:0 6px 18px rgba(0,0,0,.25);border:1px solid rgba(0,0,0,.12)}
    .logo-badge img{width:50%;height:50%}
    .brandword .re{color:black;border-radius:6px}
    .brandword .frame{color:var(--accent)}

    /* Mobile refinements */
    @media (max-width: 980px){.hero{padding:32px 0 16px}}
    @media (max-width: 640px){
      h1{font-size:clamp(22px,7vw,30px)}
      .subtitle{font-size:15px}
      .cta{padding:10px 14px;border-radius:10px}
      .logo-badge{width:48px;height:48px}
      .logo-badge img{width:26px;height:26px}
      .container{padding:18px}
      .hero{margin-left: -18px;margin-right:-18px;padding-left:18px;padding-right:18px}
    }
  
    /* === Theme overrides (glass / light) === */
    :root{
      --bg:#ffffff;
      --fg:#0d1b12;
      --muted:#55635b;
      --accent:#16a34a;
      --surface: rgba(255,255,255,.72);
      --border: rgba(15,27,20,.10);
      --shadow: 0 10px 30px rgba(15,27,20,.10);
    }
    body{
      background:
        radial-gradient(900px 540px at 10% -10%, rgba(22,163,74,.08), transparent 60%),
        radial-gradient(700px 520px at 90% 10%, rgba(15,27,20,.05), transparent 60%),
        linear-gradient(180deg, #ffffff 0%, #f4faf6 100%);
      color: var(--fg);
      font-family: 'Outfit', Inter, system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial;
      font-weight: 300;
    }
    h1{ font-weight: 400; letter-spacing: .2px; }
    .kicker{ color:#1b6d3b; opacity:.9; }
    header, .hero-card, .card, .step, .cta-block{
      background: var(--surface);
      border: 1px solid var(--border);
      backdrop-filter: blur(12px) saturate(150%);
      -webkit-backdrop-filter: blur(12px) saturate(150%);
      box-shadow: var(--shadow);
    }
    .card, .step{ transition: transform .18s ease, box-shadow .2s ease; }
    .card:hover, .step:hover{ transform: translateY(-2px); box-shadow: 0 12px 34px rgba(15,27,20,.12); }
    .cta{ background: var(--accent); color:#062a18; box-shadow: 0 8px 24px rgba(22,163,74,.25); }
    .cta--ghost{ background: rgba(22,163,74,.06); color:#0f3d25; border:1px solid rgba(22,163,74,.25); box-shadow: none; }
    .video-wrap iframe{ border-radius: 16px; }

    /* React steps styling */
    .steps-react{ display:grid; grid-template-columns:repeat(4,minmax(0,1fr)); gap:18px; }
    .step-card{ padding:18px; border-radius:16px; background: var(--surface); border:1px solid var(--border); backdrop-filter: blur(10px) saturate(150%); -webkit-backdrop-filter: blur(10px) saturate(150%); box-shadow: var(--shadow); transition: transform .18s ease, box-shadow .2s ease; }
    .step-card:hover{ transform: translateY(-2px); box-shadow: 0 12px 34px rgba(15,27,20,.12); }
    .step-pill{ display:inline-flex; width:32px; height:32px; align-items:center; justify-content:center; border-radius:999px; background: rgba(22,163,74,.12); color:#14532d; font-weight:700; margin-bottom:8px; }
    @media(max-width:980px){ .steps-react{ grid-template-columns:1fr; } }
  
    /* Inline quick steps (under hero buttons) */
    .steps-inline{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:12px;margin-top:16px;grid-column:1/-1;grid-row:2}
    .mini-step{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:12px;box-shadow:var(--shadow);backdrop-filter:blur(10px) saturate(150%);-webkit-backdrop-filter:blur(10px) saturate(150%);transition:transform .18s ease, box-shadow .2s ease}
    .mini-pill{display:inline-flex;width:24px;height:24px;align-items:center;justify-content:center;border-radius:999px;background:rgba(22,163,74,.12);color:#14532d;font-weight:700;font-size:12px;margin-bottom:6px}
    .mini-step h4{margin:4px 0 4px;font-size:15px;font-weight:600}
    .mini-step p{margin:0;color:var(--muted);font-size:13px}
    .mini-step:hover{transform:translateY(-2px);box-shadow:0 12px 34px rgba(15,27,20,.12)}
    
    @media (max-width:980px){.steps-inline{grid-template-columns:repeat(2,minmax(0,1fr))}}
    @media (max-width:640px){.steps-inline{grid-template-columns:1fr}}

      /* ...existing styles... */
    .sticky-header-hidden {
      opacity: 0;
      pointer-events: none;
      height: 0;
      overflow: hidden;
      transition: opacity 0.4s, height 0.4s;
    }
    .sticky-header-visible {
      opacity: 1;
      pointer-events: auto;
      height: auto;
      transition: opacity 0.4s, height 0.4s;
    }

    .hero {
      background-image: linear-gradient(rgba(255,255,255,0.5), rgba(255,255,255,0.5)), url('images/bgglass.png');
      background-size: cover;
      background-position: center;
      margin-left: -24px;
      margin-right: -24px;
      padding-left: 24px;
      padding-right: 24px;
    }

      .footer-link {
        cursor: pointer;
        color: var(--accent);
        margin: 0 8px;
      }

      /* Overlay covers the whole screen */
        #popupOverlay {
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.35);
          display: none; /* shown by JS */
          z-index: 9999;
          opacity: 1;
          transition: opacity 0.3s ease;
        }

        /* Modal box centered on screen */
        #popupModal {
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: min(92vw, 720px);
          max-height: min(85vh, 900px);
          overflow: auto;
          background: rgba(255, 255, 255, 0.92);
          -webkit-backdrop-filter: saturate(110%) blur(2px);
          backdrop-filter: saturate(110%) blur(2px);
          border-radius: 16px;
          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25), 0 2px 10px rgba(0, 0, 0, 0.1);
          padding: 20px 24px 24px;
          z-index: 10000; /* above overlay */
          opacity: 1;
          transition: opacity 0.3s ease;
        }

        /* Close button in the top right of the modal */
        #popupClose {
          position: sticky;
          top: 0;
          margin-left: auto;
          display: block;
          align-items: center;
          justify-content: center;
          width: 34px;
          height: 34px;
          border: 0;
          border-radius: 10px;
          background: rgba(0, 0, 0, 0.06);
          cursor: pointer;
        }

        #popupClose:hover { background: rgba(0, 0, 0, 0.12); }
        #popupClose:focus { outline: 2px solid #3b82f6; outline-offset: 2px; }

        /* Content styles */
        #popupContent {
          margin-top: 10px;
          color: #0f172a;
          line-height: 1.55;
        }

  </style>
</head>
<body>
  <header>
    <div class="container nav">
    <div style="display: flex; align-items: center; gap: 12px; flex-wrap: nowrap; margin-bottom: 12px; min-width: 0; width:100%;">
      <div class="logo-badge" style="flex: 0 0 auto;"><img src="images/reFrame_logo.svg" alt="reFrame logo" loading="lazy"/></div>
      <div style="display: flex; flex-direction: column; gap: 4px; min-width: 0; flex: 1 1 0%;">
        <h1 style="white-space: nowrap; text-overflow: ellipsis; overflow: hidden; margin: 0;">
          <span class="brandword"><span class="re">re</span><span class="frame">Frame</span></span>
        </h1>
        <div class="kicker" style="text-overflow: ellipsis; overflow: hidden; font-size: clamp(10px, 1.5vw, 14px);">Learn Evidence‑based Cognitive Reframing</div>
      </div>
      <a id="tryTop" class="cta" href="https://reframe.koyeb.app/" role="button" aria-label="Try the web app" style="flex: 0 0 auto;">▶ Try it now</a>
    </div>
  </header>

  <main class="container">
    <!-- Hero -->
      <div id="main-logo-area" style="display: flex; align-items: center; gap: 12px; flex-wrap: wrap; margin-bottom: 2em;">
<div class="logo-badge" style="flex: 0 0 auto;"><img src="images/reFrame_logo.svg" alt="reFrame logo" loading="lazy"/></div>
      <div style="display: flex; flex-direction: column; gap: 4px; min-width: 0; flex: 1 1 0%;">
        <h1 style="white-space: nowrap; text-overflow: ellipsis; overflow: hidden; margin: 0;">
          <span class="brandword"><span class="re">re</span><span class="frame">Frame</span></span>
        </h1>
        <div class="kicker" style="text-overflow: ellipsis; overflow: hidden; font-size: clamp(10px, 1.5vw, 14px);">Learn Evidence‑based Cognitive Reframing</div>
      </div>
      </div>
    <section class="hero" aria-label="Intro">
      <div>
        <div class="title-wrap">

            <h2 style="margin: 0px;">Challenging unhelpful beliefs using evidence-based methods</h2>
        </div>

        <p class="subtitle">What we tell ourselves influences every aspect of our well-being. Cognitive reframing is a powerful skill that can help us manage stress and anxiety through changing negative thought patterns.
            reFrame is a tool for learning cognitive reframing. Just write a short story about a stressful event that still keeps bothering you. reFrame helps you identify unhelpful beliefs, rate their impact, and practice generating kinder, testable alternatives. To do so we use techniques anchored in and tested by positive psychology.</p>
        <div style="margin-top:16px; display:flex; gap:12px; flex-wrap:wrap;">
          <a class="cta" href="https://reframe.koyeb.app/" aria-label="Try now">▶ Try it now</a>
        </div>
        </div>
      <div class="hero-card" id="video">
        <div class="video-wrap" aria-label="Guidde walkthrough video">
          <iframe title="reFrame product walkthrough"
            src="https://embed.app.guidde.com/playbooks/gjKhoktBMzgmcN2T5mKMzG?mode=videoOnly"
            allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen loading="lazy"></iframe>
        </div>
      </div>
      <div class="steps-inline" aria-label="Quick steps">
        <div class="mini-step"><div class="mini-pill">1</div><h4>✍️ Write your story</h4><p>Write a simple first-person story where you descirbe what happened, and what that made you think or feel.</p></div>
        <div class="mini-step"><div class="mini-pill">2</div><h4>✨ Story Decomposition</h4><p>We will find the main components of your story, such as events, feelings and beliefs.</p></div>
        <div class="mini-step"><div class="mini-pill">3</div><h4>🗯️ Rate & dispute</h4><p>We use the CAVE and ABCD methods to identify and challenge unhelpful beliefs.</p></div>
        <div class="mini-step"><div class="mini-pill">4</div><h4>🖼️ reFrame Story</h4><p>Finally, we rewrite your story into a more balanced and helpful framing if possible.</p></div>
      </div>
    </section>

    <!-- Credibility / use cases -->
    <section class="section" aria-label="Use cases">
      <div class="grid">
        <div class="card"><h3>🌤️ De-ruminate</h3><p>Recover from tricky situations, and gain a fresh perspective with cognitive reframing.</p></div>
        <div class="card"><h3>📗 Learn</h3><p>If you are new to cognitive reframing, reFrame is a tool to practice and build confidence.</p></div>
        <div class="card"><h3>🎓 Teach</h3><p>If you are a clinician or coach, you can illustrate cognitive restructuring techniques between sessions with a simple, guided flow.</p></div>
        <div class="card"><h3>🔬 Is reFrame therapy?</h3><p>No. It’s an educational tool. reFrame is not a medical application but uses evidence-based scientific methods to help you learn cognitive reframing.</p></div>
        <div class="card"><h3>🔒 Where does my data go?</h3><p>Privacy first! Minimal logging and no fine-grained tracking or profiling for advertising purposes. Fully GDPR-compliant.</p></div>
        <div class="card"><h3>🧪 How can I test it?</h3><p>Simply visit the webapp and log in via Email, Google or GitHub. Some free credits will be waiting for you.</p></div>
      </div>
    </section>

  </main>

    <footer style="text-align:center; margin-top:40px;">
      <span class="footer-link" data-popup="impressum">Impressum</span> |
      <span class="footer-link" data-popup="privacy">Data Privacy</span> |
      <span class="footer-link" data-popup="terms">Terms and Conditions</span>
    </footer>

    <!-- Popups -->
    <div class="popup-overlay" id="popupOverlay" style="display:none;">
      <div class="popup-modal" id="popupModal">
        <button class="popup-close" id="popupClose" aria-label="Close">&times;</button>
        <div id="popupContent"></div>
      </div>
    </div>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script>
    // Year
    (function(){
      var yearEl = document.getElementById('year');
      if (yearEl) yearEl.textContent = new Date().getFullYear();
      try {
        const params = new URLSearchParams(window.location.search);
        if ([...params.keys()].length) {
          const cta = document.getElementById('ctaPrimary');
          if (cta) {
            const url = new URL(cta.getAttribute('href'), window.location.origin);
            params.forEach((v,k)=> url.searchParams.set(k,v));
            cta.setAttribute('href', url.toString());
          }
        }
      } catch(e) {}
    })();

    // React Steps
    const steps = [
      { num: 1, title: 'Write your story', text: 'Describe what happened in ~6 sentences. The app automatically splits it into spans (event, feelings, beliefs).' },
      { num: 2, title: 'Select cave‑worthy beliefs', text: 'The CAVE Decider flags which beliefs have a valid causal link to the event and are suitable for rating.' },
      { num: 3, title: 'Rate & dispute', text: 'Meaningful beliefs are rated, then you’re guided to generate kinder, testable alternatives you can act on.' },
      { num: 4, title: 'reFrame Story', text: 'Export a concise, compassionate summary you can revisit or share.' },
    ];

    function StepCard(props){
      return React.createElement('div', { className: 'step-card' },
        React.createElement('div', { className: 'step-pill' }, props.num),
        React.createElement('h3', null, props.title),
        React.createElement('p', null, props.text),
      );
    }

    function StepsGrid(){
      return React.createElement('div', { className: 'steps-react' },
        steps.map(s => React.createElement(StepCard, { key: s.num, ...s }))
      );
    }

    const rootEl = document.getElementById('stepsRoot');
    if (rootEl && window.ReactDOM) {
      const root = ReactDOM.createRoot(rootEl);
      root.render(React.createElement(StepsGrid));
    }

    // Show/hide header when #main-logo-area is out of view
    document.addEventListener('DOMContentLoaded', function() {
      var logoArea = document.getElementById('main-logo-area');
      var header = document.querySelector('header');
      if (logoArea && header) {
        var observer = new IntersectionObserver(function(entries) {
          if (entries[0].isIntersecting) {
            header.classList.remove('sticky-header-visible');
            header.classList.add('sticky-header-hidden');
          } else {
            header.classList.remove('sticky-header-hidden');
            header.classList.add('sticky-header-visible');
          }
        }, { threshold: 0 });
        observer.observe(logoArea);
        // Set initial state
        header.classList.add('sticky-header-hidden');
      }
    });
  </script>
    <script>
    (function () {
      // --- Content map (edit to your actual content/HTML) ---
      const POPUP_HTML = {
        impressum: `<h3>Impressum</h3><p>reframe was developed by <a href="https://mezdahun.github.io" target="_blank" rel="noopener noreferrer" style="text-decoration: underline; text-decoration-color: #16a34a; text-underline-offset: 2px;">David Mezey</a>, a software engineer based in Berlin, Germany. You can contact the developers using this <a href="https://mezdahun.github.io/contact.html" target="_blank" rel="noopener noreferrer" style="text-decoration: underline; text-decoration-color: #16a34a; text-underline-offset: 2px;">contact form.</a>`,
privacy: `<h3>Data Privacy</h3><p><h3>🔐️ Data Processing Agreement</h3><br>reFrame processes your input using third-party services, that is OpenAI's language models API. By using reFrame, you consent to the
        processing of your data by these third-party services in accordance with their respective privacy policies. Please review OpenAI's <a href="https://openai.com/policies/privacy-policy" target="_blank" rel="noopener noreferrer" style="text-decoration: underline; text-decoration-color: #16a34a; text-underline-offset: 2px;">Privacy Policy</a> and <a href="https://openai.com/policies/terms-of-use" target="_blank" rel="noopener noreferrer" style="text-decoration: underline; text-decoration-color: #16a34a; text-underline-offset: 2px;">Terms of Use</a> for more information on how they handle your data.
        We do not store or share your input data beyond what is necessary for the operation of the service. Note, that reFrame uses OpenAI's logging services to store your submitted stories for later improvement. These are anonymized and not linked to your user profile.
        Please do not submit any sensitive personal information that can be used to identify you or others. You are solely responsible for the content you submit and any consequences that may arise from it.
        <br><br>
        Furthermore, we use Simple Analytics
        (<a href="https://simpleanalytics.com/privacy" target="_blank" rel="noopener noreferrer" style="text-decoration: underline; text-decoration-color: #16a34a; text-underline-offset: 2px;">learn more</a>) to collect anonymous usage statistics to help us improve the tool, fully respecting
        GDPR and CCPA regulations. We do not track or store any personal information for marketing or advertising purposes. Depending on your chosen authentication method you may also be subject to the privacy policies of third-party authentication providers, such as Google or GitHub.
        Please review their policies for more information on how they handle your data. Once authenticated we keep your user profile (email, name) and the number of credits used in our database, but we do not save any of your past reframing sessions.
        You can delete your account at any time to remove your data from our systems using the "Delete Account" button in the user menu. When you delete your account, we remove all personal information associated with it, such as your name, photo, and other user settings. To prevent misuse of our service,
        we retain a minimal, pseudonymized record of your email address and your used credits. This record is stored in the form of a cryptographic hash, which cannot be used to reconstruct your data. The sole purpose of this
        processing is to ensure fair use of our service. The legal basis for this is our legitimate interest under Art. 6(1)(f) GDPR. If you have any questions or concerns about how your data is handled, please contact us.
        By accepting these terms, you acknowledge that you have read and understood this disclaimer and data processing agreement and agree to use reFrame in accordance with these terms.</p></p>`,
terms: `<h1>📑 Terms & Conditions</h1><br>
        <h3>⚠️ Disclaimer</h3><br>reFrame uses large language models to process your information. While we strive to ensure the accuracy and reliability of the tool, it is important to
        understand that language models can make mistakes and reFrame is not a substitute for professional mental health care. The reframing suggestions provided by reFrame are generated
        based on patterns in data and may not always be appropriate or effective for every individual or situation. If you are experiencing significant distress, anxiety, depression, or
        any other mental health concerns, we strongly recommend seeking help from a qualified mental health professional. Your well-being is our priority, and we encourage you to use
        reFrame as a supplementary tool rather than a primary source of support. You can find a list of emergency hotlines near you <a href="https://findahelpline.com/" target="_blank" rel="noopener noreferrer" style="text-decoration: underline; text-decoration-color: #16a34a; text-underline-offset: 2px;">here</a>.
        By submitting your input you recognize that reFrame is not a medical or psychological service and agree to use it at your own risk. Furthermore, you agree, to indemnify and hold harmless the developers of reFrame
        from any claims, damages, or liabilities arising from your use of the tool.<br><br>
        <h3>🔐️ Data Processing Agreement</h3><br>reFrame processes your input using third-party services, that is OpenAI's language models API. By using reFrame, you consent to the
        processing of your data by these third-party services in accordance with their respective privacy policies. Please review OpenAI's <a href="https://openai.com/policies/privacy-policy" target="_blank" rel="noopener noreferrer" style="text-decoration: underline; text-decoration-color: #16a34a; text-underline-offset: 2px;">Privacy Policy</a> and <a href="https://openai.com/policies/terms-of-use" target="_blank" rel="noopener noreferrer" style="text-decoration: underline; text-decoration-color: #16a34a; text-underline-offset: 2px;">Terms of Use</a> for more information on how they handle your data.
        We do not store or share your input data beyond what is necessary for the operation of the service. Note, that reFrame uses OpenAI's logging services to store your submitted stories for later improvement. These are anonymized and not linked to your user profile.
        Please do not submit any sensitive personal information that can be used to identify you or others. You are solely responsible for the content you submit and any consequences that may arise from it.
        <br><br>
        Furthermore, we use Simple Analytics
        (<a href="https://simpleanalytics.com/privacy" target="_blank" rel="noopener noreferrer" style="text-decoration: underline; text-decoration-color: #16a34a; text-underline-offset: 2px;">learn more</a>) to collect anonymous usage statistics to help us improve the tool, fully respecting
        GDPR and CCPA regulations. We do not track or store any personal information for marketing or advertising purposes. Depending on your chosen authentication method you may also be subject to the privacy policies of third-party authentication providers, such as Google or GitHub.
        Please review their policies for more information on how they handle your data. Once authenticated we keep your user profile (email, name) and the number of credits used in our database, but we do not save any of your past reframing sessions.
        You can delete your account at any time to remove your data from our systems using the "Delete Account" button in the user menu. When you delete your account, we remove all personal information associated with it, such as your name, photo, and other user settings. To prevent misuse of our service,
        we retain a minimal, pseudonymized record of your email address and your used credits. This record is stored in the form of a cryptographic hash, which cannot be used to reconstruct your data. The sole purpose of this
        processing is to ensure fair use of our service. The legal basis for this is our legitimate interest under Art. 6(1)(f) GDPR. If you have any questions or concerns about how your data is handled, please contact us.
        By accepting these terms, you acknowledge that you have read and understood this disclaimer and data processing agreement and agree to use reFrame in accordance with these terms.</p>`
      };

      const overlay = document.getElementById('popupOverlay');
      const modal   = document.getElementById('popupModal');
      const content = document.getElementById('popupContent');
      const closeBtn= document.getElementById('popupClose');

      if (!overlay || !modal || !content || !closeBtn) return;

      let isOpen = false;

      function openPopup(key) {
        const html = POPUP_HTML[key] || `<p>Missing content for "${key}".</p>`;
        content.innerHTML = html;
        overlay.style.display = 'block';
        setTimeout(() => overlay.style.opacity = '1', 300);
        document.body.style.overflow = 'hidden';
        isOpen = true;
        // focus the close button for accessibility
        setTimeout(()=> closeBtn.focus(), 0);
      }

        function closePopup() {
          if (!isOpen) return;
          overlay.style.opacity = '0';
          setTimeout(() => overlay.style.display = 'none', 300);
          setTimeout(() => document.body.style.overflow = '', 300);
          setTimeout(() => content.innerHTML = '', 300);
          setTimeout(() => isOpen = false, 300);
        }

      // Open on footer link click
      document.addEventListener('click', function (e) {
        const link = e.target.closest('.footer-link[data-popup]');
        if (!link) return;
        e.preventDefault();
        const key = link.getAttribute('data-popup');
        openPopup(key);
      });

      // Close on ✕ button
      closeBtn.addEventListener('click', function (e) {
        e.stopPropagation();
        closePopup();
      });

      // Close on outside click (overlay but not modal)
      overlay.addEventListener('click', function (e) {
        if (!modal.contains(e.target)) closePopup();
      });

      // Close on Escape
      document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape') closePopup();
      });
    })();
    </script>

</body>
</html>
